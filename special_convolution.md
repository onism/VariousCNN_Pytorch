# 记录一些特殊的卷积操作

## 1 * 1 卷积

1*1 卷积使用范围很广，主要有两个功能：
1. 信息聚合，1*1卷积可以看作为对所有的通道进行线性加权，但是保持宽和高不变
2. 通道数的变换，可以增加或减少特征图的通道数

## 转置卷积 Transposed Conv

 转置卷积是语义分割上必不可少的卷积操作，基于CNN的语义分割通常由编码器和解码器组成，编码器主要用于提取目标的特征信息，解码器需要将编码的特征映射到像素空间，以对每个像素对具体类别进行判断，编码器使用常规的卷积，解码器使用转置卷积扩充特征图的长宽逐步的将特征空间映射回像素空间。
 例如，假设输入是2 * 2， 卷积大小为3 * 3，转置卷积在输入外补了两圈0，然后进行标准的卷积操作，得到4 * 4 的输出。
 对于步长为s,卷积核大小为k的转置卷积，在进行卷积运算时会默认在输入四周填充k-1圈的0，步长s是指在卷积元素之间插入s-1个0。

## 空洞卷积 Dilated Conv

空洞卷积通过在卷积核元素之间插入空格来扩展卷积核，使用空洞率r控制扩张程度。对于k=3的卷积核，r=1,2,3时实际的的卷积核如下图所示。
r=1
|  X   | X  | X  |
|  ----  | ----  |----  |
| X  | X |X |
| X  | X |X |

r=2
|  X   |    | X   |   | X  |
|  - | - | - | -  |-  |
|    |   |  |   |  |
| X  |   |X  |   |X |
|   |   |  |   |  |
| X  |   |X  |   |X |

r=3

|  X   |    |    | X   |     |  | X  |
|  - | - | - | - | - | -  |-  |
|    |   |   |   |  |   |  |
|    |   |   |   |  |   |  |
| X  |   |   |X  |  |    |X |
|   |   |  |   |  |
|   |   |  |   |  |
| X  |    | |X  |    | |X |


## 分组卷积 Group  Conv
分组卷积最初在AlexNet中出现，对于给定输入H * W * C，沿着深度即通道方向分割为g组，每一组由C/g个通道构成，对于输出通道也进行类似切分，每一组有C_2/g个通道，对每一组分别进行卷积操作。
从分组卷积的角度来看，分组数就像一个控制旋钮，最小值是1，此时的卷积就是普通卷积；最大值是输入feature map的通道数，此时的卷积就是depthwise sepereable convolution，即深度分离卷积，又叫逐通道卷积
 

## 深度可分离卷积  
深度分离卷积是分组卷积的一种特殊形式，其分组数，其中是feature map的通道数。即把每个feature map分为一组，分别在组内做卷积，每组内的单个卷积核尺寸为，组内一个卷积核生成一个feature map。这种卷积形式是最高效的卷积形式，相比普通卷积，用同等的参数量和运算量就能够生成个feature map，而普通卷积只能生成一个feature map。
所以深度分离卷积几乎是构造轻量高效模型的必用结构，如Xception, MobileNet, MobileNet V2, ShuffleNet, ShuffleNet V2, CondenseNet等轻量型网络结构中的必用结构。

 